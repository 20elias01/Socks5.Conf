#!/bin/bash

# Update package repositories and install dante-server
sudo apt update
sudo apt install -y dante-server

# Backup the original configuration file
sudo cp /etc/danted.conf /etc/danted.conf.bak

# Write the new configuration file
sudo bash -c 'cat > /etc/danted.conf <<EOF
logoutput: syslog
internal: eth0 port = 1080
external: eth0

method: none

client pass {
    from: 0.0.0.0/0 to: 0.0.0.0/0
    log: connect disconnect error
}

pass {
    from: 0.0.0.0/0 to: 0.0.0.0/0
    protocol: tcp udp
    log: connect disconnect error
}
EOF'

# Restart the danted service
sudo systemctl restart danted

# Show the status of the danted service
sudo systemctl status danted
